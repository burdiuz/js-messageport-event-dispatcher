var MessagePortDispatcher=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="http://localhost:8081/dist/",t(t.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessagePortEvent=void 0;var r=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=i.default,t.MessagePortEvent=r.MessagePortEvent},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a=t.Event=function(){function e(t,n){r(this,e),this.type=t,this.data=n||null,this.defaultPrevented=!1}return s(e,[{key:"toJSON",value:function(){return{type:this.type,data:this.data}}},{key:"isDefaultPrevented",value:function(){return this.defaultPrevented}},{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),e}(),u=function(){function e(){r(this,e),this._listeners={}}return s(e,[{key:"createList",value:function(e,t){t=parseInt(t,10);var n=this.getPrioritiesByKey(e),r=String(t),i=void 0;return o(n,r)?i=n[r]:(i=[],n[r]=i),i}},{key:"getPrioritiesByKey",value:function(e){var t=void 0;return o(this._listeners,e)?t=this._listeners[e]:(t={},this._listeners[e]=t),t}},{key:"add",value:function(e,t,n){var r=this.createList(e,n);r.indexOf(t)<0&&r.push(t)}},{key:"has",value:function(e){var t=void 0,n=!1,r=this.getPrioritiesByKey(e);if(r)for(t in r)if(o(r,t)){n=!0;break}return n}},{key:"remove",value:function(e,t){var n=this.getPrioritiesByKey(e);if(n)for(var r=Object.getOwnPropertyNames(n),i=r.length,s=0;s<i;s++){var o=r[s],a=n[o],u=a.indexOf(t);u>=0&&(a.splice(u,1),a.length||delete n[o])}}},{key:"removeAll",value:function(e){delete this._listeners[e]}},{key:"call",value:function(e,t){var n=void 0,r=!1,i=!1,s=function(){r=!0},o=function(){i=!0};e.stopPropagation=s,e.stopImmediatePropagation=o;var a=this.getPrioritiesByKey(e.type,this._listeners);if(a)for(var u=Object.getOwnPropertyNames(a).sort(function(e,t){return e-t}),l=u.length,c=0;c<l&&!r;c++)for(var v=a[u[c]],f=v.length,h=0;h<f&&!i;h++)n=v[h],n.call(t,e);delete e.stopPropagation,delete e.stopImmediatePropagation}}]),e}(),l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r(this,e),n||this.initialize(t)}return s(e,[{key:"initialize",value:function(e){this._eventPreprocessor=e,this._listeners=new u}},{key:"addEventListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._listeners.add(e,t,-n||0)}},{key:"hasEventListener",value:function(e){return this._listeners.has(e)}},{key:"removeEventListener",value:function(e,t){this._listeners.remove(e,t)}},{key:"removeAllEventListeners",value:function(e){this._listeners.removeAll(e)}},{key:"dispatchEvent",value:function(t,n){var r=e.getEvent(t,n);this._eventPreprocessor&&(r=this._eventPreprocessor.call(this,r)),this._listeners.call(r)}}],[{key:"isObject",value:function(e){return"object"===(void 0===e?"undefined":i(e))&&null!==e}},{key:"getEvent",value:function(t,n){var r=t;return e.isObject(t)||(r=new e.Event(String(t),n)),r}},{key:"create",value:function(t){return new e(t)}}]),e}();l.Event=a,t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=i.default,t.Event=r.Event},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MessagePortDispatcher=t.MessagePortEvent=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=t.MessagePortEvent=function(){function e(t,n){s(this,e),this.event=t,this.dispatcherId=n}return o(e,[{key:"toJSON",value:function(){return{event:c.toJSON(this.event),dispatcherId:this.dispatcherId}}}],[{key:"parse",value:function(t){var n=c.parse(t);return e.isEvent(n)?n.event=c.parse(n.event):n=null,n}},{key:"isEvent",value:function(e){return u.default.isObject(e)&&Object.prototype.hasOwnProperty.call(e,"dispatcherId")&&Object.prototype.hasOwnProperty.call(e,"event")}}]),e}(),c=t.MessagePortDispatcher=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];s(this,t);var u=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,!0));return a||u.initiallize(e,n,i,o),u}return i(t,e),o(t,[{key:"initiallize",value:function(e,t,n,r){this.target=e||self,this._handlers={customPostMessageHandler:t,senderEventPreprocessor:r},this.sender=u.default.create(),this.receiver=u.default.create(n),this.dispatcherId="MP/"+Math.ceil(1e4*Math.random())+"/"+Date.now(),this.targetOrigin="*",this.addEventListener=this.receiver.addEventListener.bind(this.receiver),this.hasEventListener=this.receiver.hasEventListener.bind(this.receiver),this.removeEventListener=this.receiver.removeEventListener.bind(this.receiver),this.removeAllEventListeners=this.receiver.removeAllEventListeners.bind(this.receiver),e.addEventListener("message",this._messageEventListener.bind(this))}},{key:"dispatchEvent",value:function(e,n,r){var i=u.default.getEvent(e,n);this._handlers.senderEventPreprocessor&&(i=this._handlers.senderEventPreprocessor.call(this,i));var s=t.toJSON(new l(i,this.dispatcherId));this._postMessageHandler(s,r)}},{key:"_postMessageHandler",value:function(e,t){var n=this._handlers.customPostMessageHandler;n?n.call(this,e,this.targetOrigin,t):this.target.postMessage(e,this.targetOrigin,t)}},{key:"_messageEventListener",value:function(e){e=e.nativeEvent||e;var t=l.parse(e.data);t&&(t.dispatcherId===this.dispatcherId?this.sender.dispatchEvent(t.event):this.receiver.dispatchEvent(t.event))}}],[{key:"toJSON",value:function(e){return"function"==typeof e.toJSON?e.toJSON():JSON.stringify(e)}},{key:"parse",value:function(e){var t=void 0;if(u.default.isObject(e))t=e;else try{t=JSON.parse(e)}catch(e){}return t}},{key:"create",value:function(e,n,r,i){return new t(e,n,r,i)}}]),t}(u.default),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){return t||(t=c.create(e())),t}};c.self=v(function(){return self}),c.parent=v(function(){return parent}),c.top=v(function(){return top}),c.MessagePortEvent=l,t.default=c},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r);e.exports=i.default}]);
//# sourceMappingURL=messageport-dispatcher.direct.js.map